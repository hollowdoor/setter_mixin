{"version":3,"file":"bundle.es.js","sources":["../src/index.js"],"sourcesContent":["import rawObject from 'raw-object';\n\nfunction getProps(properties){\n    let p = (properties + '');\n    let ps = p.length === 1\n    ? p\n    : p\n    .split(/\\n+/).join('')\n    .split(/(\\[)([\\s\\S]+?)(\\])/);\n\n    let props = [];\n\n    //If brackets are found there\n    //will be a hanging empty string so\n    if(ps[ps.length - 1] === ''){\n        ps = ps.slice(0, -1);\n        //When a bracket is at the first level\n        if(ps[0] === ''){\n            ps = ps.slice(1);\n        }\n    }\n\n    for(let i=0; i<ps.length; i++){\n        //Ignore dots between brackets\n        if(ps[i] === '['){\n            props.push(ps[++i]); ++i;\n        }else{\n            let items = ps[i].split('.');\n            while(items.length){\n                props.push(items.shift());\n            }\n        }\n    }\n\n    return props;\n}\n\nfunction getBase(src, props, end = 1){\n    let object = src;\n\n    for(let i=0; i<props.length; i++){\n\n        let prop = props[i];\n\n        //It was objects the whole way so\n        if(i === props.length - end){\n            return {object, prop}; //at the end\n        }\n\n        //Maybe the next object doesn't exist so\n        if(object[props[i]] === void 0){\n            object[props[i]] = rawObject();\n        }\n\n        object = object[props[i]];\n    }\n\n    return {object, prop: props[0]};\n}\n\nfunction setMasked(src, props, value, masks){\n    let {object, prop} = getBase(src, props, 2);\n    return object[masks[prop].set](props[props.length - 1], value);\n}\n\nfunction getMasked(src, props, masks){\n    let {object, prop} = getBase(src, props, 2);\n    return object[masks[prop].get](props[props.length - 1]);\n}\n\nfunction hasMask(props, masks){\n    return props.length > 1 && masks[props[props.length - 2]] !== void 0;\n}\n\nfunction set(src, properties, value, defaults, masks){\n    let obj = src;\n    let props = getProps(properties);\n    let i = 0;\n\n    if(value === void 0){\n        value = defaults[properties];\n    }\n\n    if(hasMask(props, masks)){\n        return setMasked(obj, props, value, masks);\n    }\n\n    let {object, prop} = getBase(obj, props);\n    object[prop] = value;\n}\n\nfunction get(src, properties, defaults, masks){\n    let obj = src;\n    let props = getProps(properties);\n    let value;\n\n    if(hasMask(props, masks)){\n        value = getMasked(obj, props, masks);\n    }else{\n        let {object, prop} = getBase(obj, props);\n        value = object[prop];\n    }\n\n    if(value === void 0){\n        value = defaults[properties];\n        if(value !== void 0){\n            set(src, properties, value, {}, {});\n        }\n    }\n\n    return value;\n}\n\nfunction setAll(obj, values, defaults){\n    let props = Object.keys(values);\n    for(let i=0; i<props.length; i++){\n        set(props[i], values[props[i]], defaults);\n    }\n}\n\nfunction deleteMasked(src, properties, masks){\n    let {object, prop} = getBase(src, props, 2);\n    return object[masks[prop].delete](props[props.length - 1]);\n}\n\nfunction deleteProp(src, properties, masks){\n    let obj = src;\n    let props = getProps(properties);\n    let value;\n\n    if(hasMask(props, masks)){\n        deleteMasked(obj, props, masks);\n    }else{\n        let {object, prop} = getBase(obj, props);\n        delete object[prop];\n    }\n}\n\nfunction has(src, properties, defaults, masks){\n    return get(src, properties, defaults, masks) !== void 0;\n}\n\nexport class QuickSetter {\n    constructor(object, {\n        defaults = {},\n        masks = {}\n    } = {}){\n        this.object = object;\n        this.defaults = defaults;\n        this.masks = masks;\n    }\n    set(properties, value){\n        set(this.object, properties, value, this.defaults, this.masks);\n    }\n    get(properties){\n        return get(this.object, properties, this.defaults, this.masks);\n    }\n    setAll(obj){\n        setAll(this.object, obj, this.defaults, this.masks);\n    }\n    delete(properties){\n        deleteProp(this, properties, masks);\n    }\n    has(properties){\n        return has(this.object, properties, this.defaults, this.masks);\n    }\n}\n\nexport function q(object, options){\n    return new QuickSetter(object, options);\n}\n\nexport function mixinSetter(proto, {\n    defaults = {},\n    masks = {}\n} = {}){\n\n    if(typeof defaults !== 'object'){\n        defaults = {};\n    }\n\n    Object.assign(proto, {\n        set(properties, value){\n            set(this, properties, value, defaults, masks);\n        },\n        get(properties){\n            return get(this, properties, defaults, masks);\n        },\n        setAll(obj){\n            setAll(this, obj, defaults, masks);\n        },\n        delete(properties){\n            deleteProp(this, properties, masks);\n        },\n        has(properties){\n            return has(this, properties, defaults, masks);\n        }\n    });\n\n    return proto;\n}\n"],"names":["let"],"mappings":"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"}